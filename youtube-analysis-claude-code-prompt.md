# 구독 분석 카드 추가 및 육각형 스탯 로직 강화 요청

## 1. 새 카드 2장 추가 (기존 카드 2와 카드 3 사이에 삽입)

현재 카드 구조: 커버(1) → 구독 데이터 개요(2) → 통합 유형 분석(3) → ...
변경 후: 커버(1) → 구독 데이터 개요(2) → **새 카드 A(3)** → **새 카드 B(4)** → 통합 유형 분석(5) → ...

Spotify Wrapped처럼 사용자의 구독 데이터를 시각적으로 보여주는 카드 2장을 추가한다.
뒤에 나오는 자기 분석(통합 유형 분석)의 신뢰도를 높이기 위한 근거 카드 역할이다.

---

### 새 카드 A: 구독 카테고리 랭킹

```
subtitle: Your Subscription DNA
title: 당신의 구독 취향은 상위 {N}%에요
  - {N}%는 희소성 수치 (아래 희소성 산출 로직 참고)
```

**content 구성:**

1) 상단에 볼드 카피 한 줄:
   **"당신의 세상은 온통 {1위 채널 카테고리}로 가득해요"**

2) 총 구독 채널 수 표시:
   "당신은 총 {N}개의 채널을 구독하고 있어요"

3) 카테고리 랭킹 시각화 (가로 바 차트):
   - 1위: 예능/버라이어티 — 8개 (34%) ████████████
   - 2위: 브이로그/일상 — 5개 (22%) ███████
   - 3위: 음악 — 4개 (17%) █████
   - 4위: 먹방/요리 — 3개 (13%) ████
   - 5위: 기타 — 3개 (13%) ████
   - 구독 채널을 아래 카테고리 목록 기준으로 분류하여 상위 5개 표시

4) 하단에 희소성 문구:
   "이 조합을 가진 사람은 대한민국 유튜브 사용자 중 상위 {N}%에요"

**디자인:**
- Spotify Wrapped 스타일의 임팩트 있는 레이아웃
- 바 차트는 컬러풀하게 시각화
- 카드 내 스크롤 가능하도록 구현

---

### 새 카드 B: 희귀 취향 분석

```
subtitle: Hidden Gem in Your List
title: 당신에게서 발견한 특별한 취향
```

**content 구성:**

1) 가장 희귀한 카테고리 강조:
   "가장 희귀한 구독 카테고리: **{카테고리명}**"
   "이 카테고리를 구독하는 사용자는 전체의 **{N}%**에 불과해요"

2) 해당 카테고리에 속한 채널 리스트 표시

3) 이 취향이 심리적으로 의미하는 바를 1~2문단으로 해석 (LLM 생성)

4) 시그니처 카피 한 줄 (Spotify Wrapped 스타일):
   예) "23개 채널 중 단 1개. 그게 당신의 시그니처예요."

**디자인:**
- 희귀 카테고리를 크게 강조하는 레이아웃
- 카드 내 스크롤 가능하도록 구현

---

## 2. 카테고리 분류 로직

구독 채널 리스트를 LLM에 전달하여 아래 카테고리 중 하나로 분류한다.

**카테고리 목록 (16개):**
예능/버라이어티, 브이로그/일상, 음악, 게임, 먹방/요리, 뷰티/패션, 교육/자기계발, 시사/뉴스, 기술/IT, 스포츠/운동, 반려동물, 키즈, ASMR, 투자/재테크, 여행, 기타

---

## 3. 희소성 산출 로직

**카테고리별 한국 유튜브 평균 구독 비율 기준값:**

| 카테고리 | 평균 비율 |
|---------|---------|
| 예능/버라이어티 | 18% |
| 음악 | 15% |
| 게임 | 12% |
| 브이로그/일상 | 10% |
| 먹방/요리 | 9% |
| 뷰티/패션 | 8% |
| 시사/뉴스 | 7% |
| 교육/자기계발 | 6% |
| 기술/IT | 4% |
| 스포츠/운동 | 4% |
| 투자/재테크 | 3% |
| 여행 | 2% |
| 반려동물 | 1% |
| ASMR | 0.5% |
| 키즈 | 0.5% |

**희소성 산출 방법:**

1) 사용자의 카테고리별 비율 벡터를 구한다
2) 평균 비율 벡터와 코사인 유사도를 계산한다
3) 유사도가 낮을수록 희소한 취향 → 백분위로 변환
   - 코사인 유사도 0.95 이상 → 상위 50% (평범)
   - 코사인 유사도 0.85~0.95 → 상위 20~50%
   - 코사인 유사도 0.70~0.85 → 상위 5~20%
   - 코사인 유사도 0.70 미만 → 상위 5% 이하

4) 가장 희귀한 카테고리 = 평균 비율 대비 사용자 비율의 양의 편차가 가장 큰 카테고리
   (평균보다 유독 많이 구독하는 카테고리 = 이 사람만의 특별한 취향)

---

## 4. 육각형 스탯 생성 로직 강화

현재 문제: 카테고리 → 스탯 매핑이 단순하여 점수 분포가 한쪽(자극추구 60)에 몰리고 나머지가 납작함

**육각형 6축:**
자기초월 / 자율성 / 자극추구 / 위험회피 / 인내력 / 연대감

### Step 1: 카테고리별 6축 가중치 매트릭스

각 카테고리가 6축에 기여하는 가중치를 정의한다.
(주축 +3, 부축 +2, 보조축 +1)

```
예능/버라이어티:    자극추구 +3, 연대감 +2, 자율성 +1
브이로그/일상:      연대감 +3, 자율성 +2, 자기초월 +1
음악:              자기초월 +3, 자극추구 +2, 자율성 +1
게임:              자극추구 +3, 자율성 +2, 인내력 +1
교육/자기계발:      자기초월 +3, 인내력 +2, 자율성 +1
시사/뉴스:         자기초월 +2, 연대감 +2, 위험회피 +2
먹방/요리:         자극추구 +2, 연대감 +2, 인내력 +1
뷰티/패션:         자율성 +3, 자극추구 +2, 자기초월 +1
기술/IT:           자율성 +3, 자기초월 +2, 인내력 +2
스포츠/운동:       인내력 +3, 자극추구 +2, 연대감 +1
투자/재테크:       위험회피 +2, 인내력 +3, 자율성 +2
여행:              자극추구 +3, 자기초월 +2, 자율성 +2
반려동물:          연대감 +3, 위험회피 +2, 인내력 +1
ASMR:             위험회피 +3, 자기초월 +2, 인내력 +1
키즈:              연대감 +3, 위험회피 +2, 인내력 +2
```

### Step 2: 가중 합산

```
각 축 점수 = Σ(해당 카테고리의 채널 수 × 해당 축 가중치)

예시) 예능 8개, 브이로그 5개, 음악 4개인 경우:
  자극추구 = (8×3) + (4×2) = 32
  연대감   = (8×2) + (5×3) = 31
  자율성   = (8×1) + (5×2) + (4×1) = 22
  자기초월 = (5×1) + (4×3) = 17
  인내력   = 0
  위험회피 = 0
```

### Step 3: 정규화

```
- 6축 중 최댓값을 100으로 스케일링
- 최솟값은 최소 10 이상으로 바닥 설정 (빈 축이 0이 되지 않도록)
- 공식: normalized = max(10, (raw / max_raw) × 100)
```

### Step 4: 분포 보정

```
- 한 축이 80 이상으로 돌출될 경우, 나머지 축에 보정 가산점 +5~10 부여
- 두 축 이상이 15 미만일 경우, 해당 축에 보정 가산점 +5 부여
- 목적: 시각적으로 의미 있는 육각형 형태를 유지하여 분석 결과가 풍부하게 보이도록
```

### Step 5: LLM 해석

```
- 최고 축 2개 + 최저 축 1개를 기반으로 성격 유형 해석 텍스트를 생성한다
- 이 해석이 카드 3(통합 유형 분석)의 타입 이름과 본문에 사용된다

예시 조합 → 타입명:
  자극추구(1위) + 연대감(2위) + 위험회피(최저) → "거침없는 사교형 탐험가"
  자기초월(1위) + 자율성(2위) + 연대감(최저) → "고독한 지적 방랑자"
  인내력(1위) + 위험회피(2위) + 자극추구(최저) → "묵묵한 안정 추구자"
```

---

## 요약: 전체 카드 흐름

1. **커버** — 인트로
2. **구독 데이터 개요** — 취향 한줄 요약 + 육각형 차트
3. **🆕 구독 카테고리 랭킹** — "당신의 구독 취향은 상위 N%에요" + 바 차트 + "당신의 세상은 온통 {1위}로 가득해요"
4. **🆕 희귀 취향 분석** — 가장 희귀한 카테고리 + 심리 해석 + 시그니처 카피
5. **통합 유형 분석** — 당신은 {타입} 타입이에요 + 상세 분석 2,500~3,000자
6. 이후 기존 카드 계속...
